<?xml version="1.0" encoding="UTF-8"?>
<templates id="point_of_sale.template" xml:space="preserve">
    <t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
<!--         <xpath expr="//div[hasclass('orderlines')]" position="before"> -->
<!--             <div style='text-align:center;border-bottom: 1px dashed black;'>
                   <strong> TAX INVOICE </strong>
            </div> -->
<!--         </xpath>          -->
        <xpath expr="//div[hasclass('pos-receipt-contact')]" position="replace">
            <div class="pos-receipt-contact">
                <t>
                    <div><t t-esc="receipt.company.fox_town_logo" /></div>
                </t>
                <t>
                    <div><t t-esc="receipt.company.fox_town_name" /></div>
                </t>
                <t>
                    <div><t t-esc="receipt.company.fox_address" /></div>
                </t>
                <t t-if="receipt.company.fox_phone">
                    <div>Tel:<t t-esc="receipt.company.fox_phone" /></div>
                </t>

                <t t-if="receipt.company.fox_email">
                    <div>Email : <t t-esc="receipt.company.fox_email" /></div>
                </t>
<!--                <t t-if="receipt.company.website">-->
<!--                    <div><t t-esc="receipt.company.website" /></div>-->
<!--                </t>-->
<!--                <t t-if="receipt.header_html">-->
<!--                    <t t-raw="receipt.header_html" />-->
<!--                </t>-->
<!--                <t t-if="!receipt.header_html and receipt.header">-->
<!--                    <div><t t-esc="receipt.header" /></div>-->
<!--                </t>-->
                 <t t-if="receipt.company.fox_vat_number">
                    <div>VAT Number:<t t-esc="receipt.company.fox_vat_number" /></div>
                </t>
                <t t-if="receipt.cashier">
                    <div class="cashier">
                        <div>--------------------------------</div>
                        <div>Cashier <t t-esc="receipt.cashier" /></div>
                    </div>
                </t>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('orderlines')]" position="replace">
            <div class="orderlines">
                <table class='receipt-orderlines'>
                    <colgroup>
                        <col width='45%' />
<!--                         <col width='10%' /> -->
                        <col width='25%' />
                        <col width='40%' />
                    </colgroup>
                    <tr style="border-bottom: 1px dashed black;">
                        <th style='text-align:left'>Product</th>
<!--                         <th style='text-align:left'>Qty</th> -->
                        <th style='text-align:right'>Unit Price</th>
                        <th style='text-align:right'>Price with VAT</th>
                    </tr>
                    <tr t-foreach="orderlines" t-as="orderline" t-key="orderline.id">
                        <td>
                            <t t-esc="orderline.get_product().display_name"/>
                           <t t-if="orderline.get_discount() > 0">
                                <div class="pos-disc-font">
                                    With a <t t-esc="orderline.get_discount()"/>% discount
                                </div>
                            </t>

                            <t t-if="orderline.get_quantity_str_with_unit()">
                                <div class="pos-disc-font">
                                    QTY : <t t-esc="orderline.get_quantity_str_with_unit()"/>
                                </div>
                            </t>

                           <t t-if="orderline.get_product().barcode">
                                <div class="pos-disc-font">
                                    <t t-esc="orderline.get_product().barcode"/>
                                </div>
                            </t>


                        </td>

<!--                         <td>
                            <t t-esc="orderline.get_quantity_str_with_unit()"/>
                        </td> -->

                        <td>
                            <!-- <t t-set="a" t-value="orderline.quantityStr"></t> -->
                            <t t-esc="env.pos.format_currency(orderline.get_unit_display_price())"></t>
                            <!-- <t t-set="c" t-value="b/a"></t>
                            <t t-esc="c"/> -->
                        </td>

                        <td style='text-align:right'>
                            <t t-esc="env.pos.format_currency(orderline.get_price_with_tax())"/>
                        </td>
                    </tr>
                </table>
            </div>
        </xpath>
       <xpath expr="//t[@t-if='!isTaxIncluded']" position="replace">
           <div class="pos-receipt-right-align">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</div>
           <br/>
           <div>Subtotal<span t-esc="env.pos.format_currency(receipt.subtotal)" class="pos-receipt-right-align"/>              </div>
           <t t-foreach="receipt.tax_details" t-as="tax" t-key="tax.name">
               <div>
                   VAT:<span t-esc='env.pos.format_currency_no_symbol(tax.amount)' class="pos-receipt-right-align"/>
               </div>
           </t>
       </xpath>

    </t>
</templates>


<templates id="point_of_sale.template" xml:space="preserve">

    <t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('pos-receipt')]" position="replace">
            <div class="pos-receipt">
                <t t-if="receipt.company.fox_town_logo">
                    <img class="pos-receipt-logo" t-att-src="receipt.company.fox_town_logo" alt="Logo"/>
                    <br/>
                </t>
                <div class="pos-receipt-contact">
                 <t>
                    <div><t t-esc="receipt.company.fox_town_name" /></div>
                </t>
                <t>
                    <div><t t-esc="receipt.company.fox_address" /></div>
                </t>
                <t t-if="receipt.company.fox_phone">
                    <div>Tel:<t t-esc="receipt.company.fox_phone" /></div>
                </t>

                <t t-if="receipt.company.fox_email">
                    <div>Email : <t t-esc="receipt.company.fox_email" /></div>
                </t>
                <t t-if="receipt.company.website">
                   <div><t t-esc="receipt.company.website" /></div>
               </t>
                 <t t-if="receipt.company.fox_vat_number">
                    <div>VAT Number:<t t-esc="receipt.company.fox_vat_number" /></div>
                </t>

                <t t-if="receipt.header_html">
                   <t t-raw="receipt.header_html" />
               </t>
               <t t-if="!receipt.header_html and receipt.header">
                   <div><t t-esc="receipt.header" /></div>
               </t>

                <t t-if="receipt.cashier">
                    <div class="cashier">
                        <div>--------------------------------</div>
                        <div>Cashier <t t-esc="receipt.cashier" /></div>
                    </div>
                </t>

                <br/>
                <div class="pos-receipt-order-data">
                    <div><t t-esc="receipt.name" /></div>
                    <div><t t-esc="receipt.date.localestring" /></div>
                </div>
            </div>
                <br /><br />

                <div class="orderlines">
                <table class='receipt-orderlines'>
                    <colgroup>
                        <col width='45%' />
                        <col width='25%' />
                        <col width='40%' />
                    </colgroup>
                    <tr style="border-bottom: 1px dashed black;">
                        <th style='text-align:left'>Product</th>
                        <th style='text-align:right'>Unit Price</th>
                        <th style='text-align:right'>Price with VAT</th>
                    </tr>
                    <tr t-foreach="orderlines" t-as="orderline" t-key="orderline.id">
                        <td>
                            <t t-esc="orderline.get_product().display_name"/>
                           <t t-if="orderline.get_discount() > 0">
                                <div class="pos-disc-font">
                                    With a <t t-esc="orderline.get_discount()"/>% discount
                                </div>
                            </t>

                            <t t-if="orderline.get_quantity_str_with_unit()">
                                <div class="pos-disc-font">
                                    QTY : <t t-esc="orderline.get_quantity_str_with_unit()"/>
                                </div>
                            </t>

                           <t t-if="orderline.get_product().barcode">
                                <div class="pos-disc-font">
                                    <t t-esc="orderline.get_product().barcode"/>
                                </div>
                            </t>


                        </td>
                        <td>
                            <t t-esc="env.pos.format_currency(orderline.get_unit_display_price())"></t>
                        </td>

                        <td style='text-align:right'>
                            <t t-esc="env.pos.format_currency(orderline.get_price_with_tax())"/>
                        </td>
                    </tr>
                </table>
            </div>

                <!-- Subtotal -->

                <t t-if="!isTaxIncluded">
                    <div class="pos-receipt-right-align">--------</div>
                    <br/>
                    <div>Subtotal<span t-esc="env.pos.format_currency(receipt.subtotal)" class="pos-receipt-right-align"/></div>
                    <t t-foreach="receipt.tax_details" t-as="tax" t-key="tax.name">
                        <div>
                            <t t-esc="tax.name" />
                            <span t-esc='env.pos.format_currency_no_symbol(tax.amount)' class="pos-receipt-right-align"/>
                        </div>
                    </t>
                </t>

                <!-- Total -->
                <div class="pos-receipt-right-align">--------</div>
                <br/>
                <div class="pos-receipt-amount">
                    TOTAL
                    <span t-esc="env.pos.format_currency(receipt.total_with_tax)" class="pos-receipt-right-align"/>
                </div>
                <t t-if="receipt.total_rounded != receipt.total_with_tax">
                    <div class="pos-receipt-amount">
                        ROUNDED
                        <span t-esc="env.pos.format_currency(receipt.total_rounded)" class="pos-receipt-right-align"/>
                    </div>
                </t>
                <br/><br/>

                <!-- Payment Lines -->

                <t t-foreach="receipt.paymentlines" t-as="line" t-key="line.cid">
                    <div>
                        <t t-esc="line.name" />
                        <span t-esc="env.pos.format_currency_no_symbol(line.amount)" class="pos-receipt-right-align"/>
                    </div>
                </t>
                <br/>

                <div class="pos-receipt-amount receipt-change">
                    CHANGE
                    <span t-esc="env.pos.format_currency(receipt.change)" class="pos-receipt-right-align"/>
                </div>
                <br/>

                <!-- Extra Payment Info -->

                <t t-if="receipt.total_discount">
                    <div>
                        Discounts
                        <span t-esc="env.pos.format_currency(receipt.total_discount)" class="pos-receipt-right-align"/>
                    </div>
                </t>
                <t t-if="isTaxIncluded">
                    <t t-foreach="receipt.tax_details" t-as="tax" t-key="tax.name">
                        <div>
                            <t t-esc="tax.name" />
                            <span t-esc="env.pos.format_currency_no_symbol(tax.amount)" class="pos-receipt-right-align"/>
                        </div>
                    </t>
                    <div>
                        Total Taxes
                        <span t-esc="env.pos.format_currency(receipt.total_tax)" class="pos-receipt-right-align"/>
                    </div>
                </t>

                <div class="before-footer" />

                <!-- Footer -->
                <div t-if="receipt.footer_html"  class="pos-receipt-center-align">
                    <t t-raw="receipt.footer_html" />
                </div>

                <div t-if="!receipt.footer_html and receipt.footer"  class="pos-receipt-center-align" style="white-space:pre-line">
                    <br/>
                    <t t-esc="receipt.footer" />
                    <br/>
                    <br/>
                </div>

                <div class="after-footer">
                    <t t-foreach="receipt.paymentlines" t-as="line">
                        <t t-if="line.ticket">
                            <br />
                            <div class="pos-payment-terminal-receipt">
                                <t t-raw="line.ticket" />
                            </div>
                        </t>
                    </t>
                </div>

            </div>
        </xpath>
    </t>

</templates>